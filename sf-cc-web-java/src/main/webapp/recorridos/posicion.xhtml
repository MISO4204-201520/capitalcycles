<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	<h:body>
		<ui:composition template="../administracion/plantillas/plantilla.xhtml">
			<ui:define name="contenido">
				<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
				<script type="text/javascript" src="http://www.google.com/jsapi"></script>
				<script type="text/javascript">
				    if (navigator.geolocation) {
				        checkGeolocationByHTML5();
				    } else {
				        checkGeolocationByLoaderAPI(); // HTML5 not supported! Fall back to Loader API.
				    }
				
				    function checkGeolocationByHTML5() {
				        navigator.geolocation.getCurrentPosition(function(position) {
				            setMapCenter(position.coords.latitude, position.coords.longitude);
				        }, function() {
				            checkGeolocationByLoaderAPI(); // Error! Fall back to Loader API.
				        });
				    }
				
				    function checkGeolocationByLoaderAPI() {
				        if (google.loader.ClientLocation) {
				            setMapCenter(google.loader.ClientLocation.latitude, google.loader.ClientLocation.longitude);
				        } else {
				            // Unsupported! Show error/warning?
				        }
				    }
				
				    function setMapCenter(latitude, longitude) {
				    	PF('w_gmap').getMap().setCenter(new google.maps.LatLng(latitude, longitude));
				        var marker = new google.maps.Marker({
				            position: new google.maps.LatLng(latitude, longitude),
				            map: PF('w_gmap').getMap(),
				            title: 'Prueba'
				          });

				    }
				</script>
				<h:form id="formRecorridos">
					<p:gmap widgetVar="w_gmap" center="4.598889, -74.0808" zoom="15" type="MAPA"
							style="width:100%;height:400px" />
					<p:panel>
						<h:panelGroup layout="block" styleClass="estiloDiv">
							<p:commandButton value="Cancelar" action="paginaInicio?faces-redirect=true" immediate="true"/>
						</h:panelGroup>
					</p:panel>
				</h:form>
    		</ui:define>				
		</ui:composition>	
	</h:body>
</html>